<!DOCTYPE html>
<html>
<head>
<title>Students Attendance</title>

<style>
body{
    background:#0f0f0f;
    color:white;
    font-family:Arial;
}

h2{
    text-align:center;
}

.table-container{
    overflow-x:auto;
    margin:20px;
}

table{
    border-collapse:collapse;
    width:100%;
    min-width:1200px;
}

th, td{
    border:1px solid #444;
    padding:8px;
    text-align:center;
}

th{
    background:#00c6ff;
    color:black;
}

tr:nth-child(even){
    background:#1a1a1a;
}
</style>
</head>

<body>

<h2>ðŸ“Š Attendence DashBoard</h2>

<div class="table-container">
<table id="attendanceTable">
<tr>
    <th>ID</th>
    <th>Roll No</th>
    <th>Name</th>
    <th>Email</th>
    <th>Phone</th>

    <th>Java </th>
    <th>Python </th>
    <th>SQL </th>
    <th>DS </th>
    <th>CN </th>
    <th>OS </th>
    <th>Overall %</th>
</tr>
</table>
</div>

<script>
fetch("http://localhost:5001/view-students-attendance")
.then(res => res.json())
.then(data => {

    const table = document.getElementById("attendanceTable");

    data.forEach(row => {

        let totalPresent =
    row.java_present +
    row.python_present +
    row.sql_present +
    row.ds_present +
    row.cn_present +
    row.os_present;

let overallPercentage = ((totalPresent / 180) * 100).toFixed(2);

let tr = `
<tr>
    <td>${row.student_id}</td>
    <td>${row.rollno}</td>
    <td>${row.name}</td>
    <td>${row.email}</td>
    <td>${row.phone}</td>

    <td>${row.java_present}/30</td>
    <td>${row.python_present}/30</td>
    <td>${row.sql_present}/30</td>
    <td>${row.ds_present}/30</td>
    <td>${row.cn_present}/30</td>
    <td>${row.os_present}/30</td>

    <td>${overallPercentage}%</td>
</tr>
`;

        table.innerHTML += tr;
    });

});
</script>

</body>
</html>
